# CLAUDE.md ‚Äî {{PROJECT_NAME}}

> **"{{PROJECT_TAGLINE}}"**

---

## ‚ö†Ô∏è CRITICAL: MANDATORY BEHAVIORS

**Diese Regeln sind NICHT optional. Bei JEDER Antwort mit Code-√Ñnderungen:**

1. **CHECKLIST ZUERST** ‚Äî Die `[x/8] Status Check` Checklist MUSS als ALLERERSTES in deiner Antwort erscheinen
2. **GRAPHITI VOR ARBEIT** ‚Äî Bevor du Code schreibst: `mcp__graphiti__search_nodes()` ausf√ºhren
3. **PR MERGE NIE OHNE REVIEW** ‚Äî Vor jedem `gh pr merge`: `Task(subagent_type="pr-review-toolkit:code-reviewer")`

**Wenn du diese Regeln nicht befolgst, ist die Antwort UNG√úLTIG.**

---

## Development Philosophy

**WE MUST NOT DO SHORTCUTS**

### Non-Negotiable Rules
- NO MOCKING ‚Äî Real backend connections only
- NO TODOs ‚Äî Fix immediately and completely
- NO else statements ‚Äî Guard clauses everywhere
- NO utils/ folders ‚Äî Proper package design
- 100% test pass rate required to commit
- Never push directly to main
- **NO MERGE WITHOUT REVIEW** ‚Äî Always run code-reviewer subagent before merging PRs

---

## SKILLS (Context via Skills laden)

| Skill | Wann aufrufen |
|-------|---------------|
| `core-rules` | **IMMER** ‚Äî Guard clauses, no TODOs, no mocking |
| `quality-gate` | **IMMER bei Code-√Ñnderungen** ‚Äî 8/8 Checklist PFLICHT! |
| `worktree` | **VOR Code-√Ñnderungen** ‚Äî Isolation Check |
| `graphiti-memory` | Session-Start, neue Tasks, bei Fehlern |
| `delegation` | Komplexe Tasks ‚Äî Subagent-Auswahl |
| `tdd` | Neue Features, Bug Fixes ‚Äî Tests FIRST |
| `debugging` | Bei Fehlern ‚Äî Root Cause vor Fix |
| `verification` | Vor Completion Claims ‚Äî Evidence required |
| `pr-workflow` | PRs ‚Äî CI, Review, Merge-Rules |

**Skill aufrufen:** "Invoke skill `<name>`"

---

## üéØ QUALITY GATE: [8/8] Status Check

**MUSS als ERSTES in jeder Antwort stehen bei Code-√Ñnderungen:**

### Die 8 Checks (Reihenfolge kritisch!)

1. **[‚úì/‚úó] Graphiti ZUERST**: Wurde VOR ALLEM ANDEREN das Arbeitsged√§chtnis durchsucht?
2. **[‚úì/‚úó] Delegation**: Wurde gepr√ºft ob Subagents die Aufgabe √ºbernehmen k√∂nnen?
3. **[‚úì/‚úó] Product Review**: Bei Feature-Planung: Team konsultiert?
4. **[‚úì/‚úó] Design System**: Wird der Style eingehalten?
5. **[‚úì/‚úó] Testing**: Wurden Tests ausgef√ºhrt / geschrieben?
6. **[‚úì/‚úó] PR Review**: Bei PR-Merge: CI abgewartet + code-reviewer Subagent ausgef√ºhrt?
7. **[‚úì/‚úó] Mobile**: Bei UI-√Ñnderungen: mobile-responsive-reviewer ausgef√ºhrt? (44px touch targets!)
8. **[‚úì/‚úó] Security**: Bei API/Auth-√Ñnderungen: security-pentest-reviewer ausgef√ºhrt? (OWASP Top 10)

### PFLICHT-FORMAT:
```
**[x/8] Status Check:**
- ‚úÖ Graphiti: VOR der Arbeit nach [keywords] gesucht, [n] relevante Eintr√§ge gefunden
- ‚úÖ Delegation: Task an [agent] delegiert / Begr√ºndet selbst gemacht
- ‚úÖ Product Review: Team konsultiert / Keine Feature-Planung
- ‚úÖ Design System: Style compliant / Keine UI-√Ñnderungen
- ‚úÖ Testing: `npm test` erfolgreich / Keine Code-√Ñnderungen
- ‚úÖ PR Review: CI gr√ºn + code-reviewer passed / Kein PR in dieser Antwort
- ‚úÖ Mobile: mobile-responsive-reviewer passed / Keine UI-√Ñnderungen
- ‚úÖ Security: security-pentest-reviewer passed / Keine API/Auth-√Ñnderungen
```

**REGEL**: Graphiti-Check MUSS immer ‚úÖ sein, au√üer bei trivialen Fragen ("Hallo")

---

## üö® PR MERGE WORKFLOW (PFLICHT!)

**VOR JEDEM PR MERGE ‚Äî KEINE AUSNAHMEN:**

### Schritt 1: CI Pipeline abwarten
```bash
gh pr checks <pr-number> --watch
```

### Schritt 2: Code Review mit Subagent
```
Task(subagent_type="pr-review-toolkit:code-reviewer", prompt="Review PR #X")
```

### Schritt 3: Erst dann Merge
```bash
gh pr merge --squash --delete-branch
```

### ‚ùå VERBOTEN:
- Merge ohne auf CI zu warten
- Merge ohne code-reviewer Subagent
- Schnelles "gh pr create && gh pr merge" in einem Schritt

---

## üîß WORKTREE CHECK (vor JEDER Code√§nderung)

```bash
pwd                      # MUSS: {{project}}-<name>
git branch --show-current # MUSS: feat/xxx, fix/xxx, chore/xxx
```

**Checks nicht bestanden?** ‚Üí Erst Worktree erstellen:
```bash
cd {{PROJECT_ROOT}}
git worktree add ../{{project}}-<name> -b <type>/<issue>-<desc>
cd ../{{project}}-<name>
```

---

## üß† GRAPHITI: Arbeitsged√§chtnis IMMER ZUERST!

**BEI JEDER AUFGABE ‚Äî ABSOLUT KEINE AUSNAHMEN:**

### SESSION-START:
```python
mcp__graphiti__get_context(
    query="gotcha fix pattern architecture",
    group_ids=["proj:{{project}}", "global:"]
)
```

### VOR JEDER AUFGABE:
```python
mcp__graphiti__search_nodes(
    query="[task keywords]",
    group_ids=["proj:{{project}}"],
    max_nodes=10
)
```

### BEI FEHLERN:
```python
mcp__graphiti__search_nodes(
    query="[error message]",
    group_ids=["proj:{{project}}"],
    max_nodes=5
)
```

### HEUREKA-REGEL: Erkenntnisse SOFORT speichern!
```python
mcp__graphiti__add_memory(
    name="HEUREKA: [kurze Beschreibung]",
    episode_body="Was gelernt, was war falsch, wie ist es richtig",
    group_id="proj:{{project}}",
    source="text"
)
```

---

## QUICK COMMANDS

```bash
{{DEV_COMMAND}}      # Start dev server
{{TEST_COMMAND}}     # Run tests
{{BUILD_COMMAND}}    # Build project
```

---

## NIEMALS √ÑNDERN ohne R√ºckfrage

Claude's Wissen endet {{KNOWLEDGE_CUTOFF}}. Folgende Dinge NIEMALS eigenm√§chtig √§ndern:

- **API Model IDs** (OpenAI, Anthropic, etc.)
- **API Konfigurationen** die nach dem Cutoff released wurden

**Bei Unsicherheit: USER FRAGEN, nicht raten!**

---

## COMPLETION SUMMARY (Pflicht bei Worktree-Abschluss)

```
Summary: <Kurzbeschreibung>
Tests: <Pass/Fail>
PR URL: {{REPO_URL}}/pull/<number>
Worktree: {{project}}-<name>
Branch: <type>/<issue>-<description>
```

---

*"{{PROJECT_MOTTO}}"*
